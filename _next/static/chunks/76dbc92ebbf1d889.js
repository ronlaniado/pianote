(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47294,e=>{"use strict";var t=e.i(78187),r=e.i(40456);let s=["C","D","E","F","G","A","B"],l={C:60,D:62,E:64,F:65,G:67,A:69,B:71},a={treble:"B",bass:"D"},n=[0,140,260],i=0;function o(e){let t=null;for(let r=0;r<6;r+=1){let r=.5>Math.random()?"treble":"bass",l=Math.floor(9*Math.random())+-4,n={id:i++,clef:r,staffStep:l,letter:function(e,t){var r;let l=((s.indexOf(a[t])+e)%(r=s.length)+r)%r;return s[l]}(l,r)};if(!e||n.clef!==e.clef||n.staffStep!==e.staffStep){t=n;break}t=n}return t}let c=null;function x({queue:e,feedback:s,isShifting:l,spawnedId:a}){let i=e[0];if(!i)return null;let o="treble"===i.clef?74:184;i.staffStep;let c=(0,r.useMemo)(()=>{let e=[];if(i.staffStep>=6)for(let t=6;t<=i.staffStep;t+=2)e.push(o-6*t);else if(i.staffStep<=-6)for(let t=-6;t>=i.staffStep;t-=2)e.push(o-6*t);return e},[o,i.staffStep]);return(0,t.jsx)("div",{className:"w-full overflow-hidden rounded-3xl border border-white/10 bg-slate-900/40 p-6 shadow-[0_20px_50px_-24px_rgba(15,23,42,0.7)]",children:(0,t.jsxs)("svg",{viewBox:"0 0 960 260",role:"img","aria-label":"Grand staff with a single note",className:"h-auto w-full",children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"scanGlow",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#38bdf8",stopOpacity:"0.35"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#0ea5e9",stopOpacity:"0.05"})]}),(0,t.jsxs)("linearGradient",{id:"noteSheen",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"0.5"}),(0,t.jsx)("stop",{offset:"45%",stopColor:"#ffffff",stopOpacity:"0.12"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:"0"})]})]}),(0,t.jsx)("rect",{x:"0",y:"0",width:"960",height:"260",fill:"url(#scanGlow)",opacity:"0.18"}),[50,62,74,86,98].map(e=>(0,t.jsx)("line",{x1:"140",x2:"840",y1:e,y2:e,stroke:"rgba(226,232,240,0.35)",strokeWidth:"1.5"},`treble-${e}`)),[160,172,184,196,208].map(e=>(0,t.jsx)("line",{x1:"140",x2:"840",y1:e,y2:e,stroke:"rgba(226,232,240,0.35)",strokeWidth:"1.5"},`bass-${e}`)),(0,t.jsxs)("g",{"aria-label":"Treble clef",children:[(0,t.jsx)("text",{x:"106",y:"92",fill:"rgba(241,245,249,0.92)",fontSize:"58",fontFamily:"serif",textAnchor:"middle",children:"ð„ž"}),(0,t.jsx)("text",{x:"106",y:"114",fill:"rgba(226,232,240,0.9)",fontSize:"13",fontWeight:"700",textAnchor:"middle",children:"Treble"})]}),(0,t.jsxs)("g",{"aria-label":"Bass clef",children:[(0,t.jsx)("text",{x:"110",y:"196",fill:"rgba(241,245,249,0.92)",fontSize:"56",fontFamily:"serif",textAnchor:"middle",children:"ð„¢"}),(0,t.jsx)("text",{x:"110",y:"220",fill:"rgba(226,232,240,0.9)",fontSize:"13",fontWeight:"700",textAnchor:"middle",children:"Bass"})]}),c.map(e=>(0,t.jsx)("line",{x1:402,x2:458,y1:e,y2:e,stroke:"rgba(226,232,240,0.85)",strokeWidth:"2",strokeLinecap:"round"},`ledger-${e}`)),e.slice(0,3).map((e,r)=>{let i=430+(n[r]??0),o=("treble"===e.clef?74:184)-6*e.staffStep,c=0===r,x=0===r?{rx:14,ry:10.5,innerRx:9,innerRy:7}:1===r?{rx:12,ry:9,innerRx:8,innerRy:6}:{rx:10,ry:7,innerRx:6.5,innerRy:4.5},d=c?"rgba(15,23,42,0.5)":"rgba(148,163,184,0.45)",f=null!=a&&e.id===a,p=e.staffStep>1,u=c?34:28,m=p?i-x.rx+2:i+x.rx-2,h=p?o+u:o-u;return(0,t.jsxs)("g",{className:`note-layer ${0===r?"current":1===r?"preview-1":"preview-2"} ${l?"shifting":""} ${f?"note-enter":""}`,style:{transformOrigin:`${i}px ${o}px`},children:[(0,t.jsx)("line",{x1:m,y1:o,x2:m,y2:h,stroke:c?d:"rgba(148,163,184,0.35)",strokeWidth:"3",strokeLinecap:"round"}),(0,t.jsx)("ellipse",{cx:i,cy:o,rx:x.rx,ry:x.ry,fill:c?"correct"===s?"#22c55e":"wrong"===s?"#ef4444":"#60a5fa":"rgba(191,219,254,0.55)",stroke:d,strokeWidth:"2"}),(0,t.jsx)("ellipse",{cx:i,cy:o,rx:x.rx-1.5,ry:x.ry-1.5,fill:"url(#noteSheen)",opacity:c?.35:.22}),(0,t.jsx)("ellipse",{cx:i-2,cy:o-2,rx:x.innerRx,ry:x.innerRy,fill:"rgba(255,255,255,0.2)"})]},e.id)})]})})}function d({onPress:e,feedback:r,lastPressed:l,hintLetter:a}){return(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm uppercase tracking-[0.2em] text-slate-300",children:"Click to answer"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-200",children:[(0,t.jsx)("span",{className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.15em] ${"correct"===r?"bg-emerald-500/15 text-emerald-200":"wrong"===r?"bg-rose-500/15 text-rose-200":"bg-white/10 text-slate-200"}`,children:"idle"===r?"Idle":r}),a?(0,t.jsxs)("span",{className:"rounded-full bg-amber-400/20 px-3 py-1 text-xs font-semibold text-amber-100",children:["Hint: ",a]}):null]})]}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-3",children:s.map(s=>{let n=l===s,i=a===s,o=n&&"correct"===r,c=n&&"wrong"===r;return(0,t.jsxs)("button",{type:"button",onClick:()=>e(s),className:`group relative flex h-16 items-center justify-center rounded-2xl border text-lg font-semibold uppercase transition duration-200 focus:outline-none ${o?"border-emerald-400/60 bg-emerald-400/15 text-emerald-50 shadow-[0_10px_30px_-18px_rgba(16,185,129,0.8)]":c?"border-rose-400/60 bg-rose-400/15 text-rose-50 shadow-[0_10px_30px_-18px_rgba(248,113,113,0.8)]":i?"border-amber-400/60 bg-amber-400/15 text-amber-50 shadow-[0_10px_30px_-18px_rgba(251,191,36,0.8)]":"border-white/10 bg-white/5 text-slate-50 hover:border-white/40 hover:bg-white/10"}`,"aria-label":`Press ${s}`,children:[(0,t.jsx)("span",{className:"text-xl",children:s}),(0,t.jsx)("span",{className:"pointer-events-none absolute inset-x-4 bottom-2 block h-px bg-white/10 opacity-0 transition group-hover:opacity-100"})]},s)})})]})}function f(){let[e,a]=(0,r.useState)([]),[n,i]=(0,r.useState)("idle"),[f,p]=(0,r.useState)(),[u,m]=(0,r.useState)(),[h,b]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),j=(0,r.useRef)(null),w=(0,r.useRef)(null),v=e[0];(0,r.useEffect)(()=>{let e=o(),t=o(e),r=o(t);a([e,t,r]),b(r.id)},[]),(0,r.useEffect)(()=>()=>{j.current&&clearTimeout(j.current),w.current&&clearTimeout(w.current)},[]);let k=(0,r.useCallback)(t=>{if(g)return;let r=e[0];r&&(p(t),function(e){let t=window.AudioContext||window.webkitAudioContext;if(!t)return;c||(c=new t),"suspended"===c.state&&c.resume();let r=440*Math.pow(2,(l[e]-69)/12),s=c.currentTime,a=c.createOscillator(),n=c.createGain();a.type="sine",a.frequency.value=r,n.gain.setValueAtTime(0,s),n.gain.linearRampToValueAtTime(.35,s+.005),n.gain.exponentialRampToValueAtTime(1e-4,s+.2),a.connect(n),n.connect(c.destination),a.start(s),a.stop(s+.25)}(t),t===r.letter?(i("correct"),m(void 0),y(!0),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{a(e=>{if(0===e.length)return e;let[,t,r]=e,s=o(r??t??e[0]),l=[t??s,r??s,s];return b(s.id),l}),i("idle"),y(!1)},420)):(i("wrong"),m(r.letter),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>m(void 0),500),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>i("idle"),200)))},[e,g]);return((0,r.useEffect)(()=>{let e=e=>{let t=e.key.toUpperCase();s.includes(t)&&(e.preventDefault(),k(t))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[k]),v)?(0,t.jsxs)("div",{className:"relative min-h-screen overflow-hidden bg-slate-950 text-slate-50",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(56,189,248,0.15),transparent_35%),radial-gradient(circle_at_80%_10%,rgba(236,72,153,0.12),transparent_35%),radial-gradient(circle_at_60%_70%,rgba(16,185,129,0.12),transparent_30%)]"}),(0,t.jsxs)("div",{className:"relative mx-auto flex min-h-screen max-w-6xl flex-col items-center gap-10 px-6 py-14",children:[(0,t.jsxs)("header",{className:"flex w-full flex-col gap-4 rounded-3xl border border-white/10 bg-slate-900/60 p-6 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-300",children:"Grand Staff Loop"}),(0,t.jsx)("h1",{className:"text-3xl font-semibold text-white sm:text-4xl",children:"Instant Note Trainer"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"rounded-2xl bg-emerald-500/15 px-4 py-2 text-sm text-emerald-100",children:"Plays on every click"}),(0,t.jsx)("div",{className:"rounded-2xl bg-sky-500/15 px-4 py-2 text-sm text-sky-100",children:"Random clef, naturals only"})]})]}),(0,t.jsx)("p",{className:"max-w-3xl text-base text-slate-200",children:"See one note on the grand staff. Click the matching letter to advance. Wrong answers flash, show a hint, and keep the same target until you nail it."})]}),(0,t.jsx)(x,{queue:e,feedback:n,isShifting:g,spawnedId:h}),(0,t.jsx)("div",{className:"w-full rounded-3xl border border-white/10 bg-slate-900/60 p-6 shadow-[0_16px_40px_-30px_rgba(15,23,42,0.9)] backdrop-blur",children:(0,t.jsx)(d,{onPress:k,feedback:n,lastPressed:f,hintLetter:u})})]})]}):(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 text-slate-100",children:(0,t.jsx)("div",{className:"rounded-3xl border border-white/10 bg-slate-900/50 px-6 py-4 text-sm uppercase tracking-[0.25em] text-slate-300",children:"Loading the first note..."})})}e.s(["default",()=>f])}]);